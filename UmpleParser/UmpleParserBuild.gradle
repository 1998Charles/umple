ext {
    umpleOutputDir = "src-gen-umple"
}

sourceSets {
    main { 
        umple{
           outputDir = file('dist/gradle/src-gen/UmpleParser')
           master = file('src/Master.ump')
           customMasterPath = true
           compileGenerated = false
        }
        output.classesDir = "dist/gradle/bin"
    }
}

// Incremental build logic
compileUmple {
    inputs.dir("src") // If any of the source .ump files here have changed, recompile them. Otherwise the task is considered up-to-date
    outputs.dir(umpleOutputDir)
}
